 <!DOCTYPE html> <html> <head> <?php include("data/dbConnect.php"); include("libraries/WrapMySQL.php"); include("libraries/Parsedown.php"); ?> <link href="/styles/fontawesome.min.css" rel="stylesheet" /> <link href="/styles/style.min.css" rel="stylesheet" /> <link href="/styles/staggeredFade.min.css" rel="stylesheet" /> <link href="/styles/textElements.min.css" rel="stylesheet" /> <link href="/styles/formElements.min.css" rel="stylesheet" /> <link href="/styles/layoutGeneral.min.css" rel="stylesheet" /> <script src="/scripts/PageLayout.js"></script> <script src="/scripts/CommonScripts.js"></script> <meta name="viewport" content="width=device-width" /> <title>Projects | Endev</title> <link href="/styles/layoutAdvancedProject.css" rel="stylesheet" /> </head> <body> <header style="overflow: hidden;"> <div id="headerBGImage"></div> <div id="bannerCover" style="opacity: 0.5"> </div> <h1 id="headerProjectTitle"></h1> <a href="/"> <div class="endevLogo" id="endevLogo"></div> <div class="endevLogoSticky" id="endevLogoSticky"></div> </a> <nav class="default"> <div class="fullWidthMenu"> <a href="/">Home</a> <a href="/projects">Projects</a> <a href="/support">Support</a> <a href="/downloads">Downloads</a> <a href="/contact">Contact</a> <a href="/more">More</a> </div> <div class="mobileMenu stagFade"> <label for="toggleMobileMenuOverlay"><span>Projects</span><a><i class="fa fa-bars"></i></a></label> <input type="checkbox" id="toggleMobileMenuOverlay" onchange="ShowElementIfChecked(this, 'mobileMenuOverlay')"/> <div class="mobileMenuOverlay" id="mobileMenuOverlay"> <a href="/">Home</a> <a href="/projects">Projects</a> <a href="/support">Support</a> <a href="/downloads">Downloads</a> <a href="/contact">Contact</a> <a href="/more">More</a> <label for="toggleMobileMenuOverlay"><a>Close</a></label> </div> </div> </nav> <nav class="default" style="display: none;"></nav> <div class="breakpointCheck"></div> </header> <main> <?php                                                                 
if(isset($_GET['projectID'])) $projectID = $_GET['projectID']; else {     header("Location: /projects");     die(); }  if(isset($_GET['page']) AND $_GET['page'] == -1)  {     header("Location: /project/".$projectID);     die(); }  $sql = new WrapMySQL(getenv("DBHost"),getenv("DBName"),getenv("DBUser"),getenv("DBPass")); $sql->Open();                                                                  
$project = $sql->ExecuteQuery("SELECT * FROM projects WHERE ProjectID = ?", $projectID); if(count($project) == 0) {     header("Location: /projects");     die(); } else $project = $project[0]; ?> <aside> <ul> <li onclick="SelectProjectPage(0, '<?= $project["ProjectID"] ?>', 'Overview')"><i class="fas fa-home"></i> <span>Overview</span></li> <li onclick="SelectProjectPage(1, '<?= $project["ProjectID"] ?>', 'Support')"><i class="fas fa-headset"></i> <span>Support &amp; FAQ</span></li> <li onclick="SelectProjectPage(2, '<?= $project["ProjectID"] ?>', 'Issues')"><i class="fas fa-exclamation-circle"></i> <span>Issues</span></li> <li onclick="SelectProjectPage(3, '<?= $project["ProjectID"] ?>', 'Downloads')"><i class="fas fa-download"></i> <span>Downloads</span></li> <li onclick="SelectProjectPage(4, '<?= $project["ProjectID"] ?>', 'Version-History')"><i class="fas fa-history"></i> <span>Version History</span></li> <li onclick="SelectProjectPage(5, '<?= $project["ProjectID"] ?>', 'Readme')"><i class="fas fa-book-reader"></i> <span>Readme</span></li> <li onclick="SelectProjectPage(6, '<?= $project["ProjectID"] ?>', 'tech-info')"><i class="fas fa-cogs"></i> <span>Tech. Information</span></li> <li onclick="SelectProjectPage(7, '<?= $project["ProjectID"] ?>', 'license')"><i class="fas fa-file-alt"></i> <span>License</span></li> </ul> </aside> <script>     SetProjectTitle("<?= $project["ProjectNameShort"]?>");     SetProjectBanner("<?= $project["ProjectBanner"]?>"); </script> <?php   function TabPageSelected($tabIndex, $isDefaultTab = false) {     if(isset($_GET['page']) AND $_GET['page'] >= 0 AND $_GET['page'] <= 7)     {         if($_GET['page'] == $tabIndex) return "block";         else return "none";     }     else if($isDefaultTab) return "block";     else return "none"; }  function GetGithubAPIResponse($url) {     $curl = curl_init();      curl_setopt_array($curl, [     CURLOPT_URL => $url,     CURLOPT_USERAGENT => 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)',     CURLOPT_TIMEOUT => 30,     CURLOPT_RETURNTRANSFER => 1,     CURLOPT_HTTPHEADER => array(         'Authorization: token '.getenv("GithubOAuth")         )     ]);      return json_decode(curl_exec($curl)); }  function ReadableFileSize($byteSize) {     if($byteSize < 1024) return $byteSize." Bytes";      else if($byteSize < 1048576) return round(($byteSize / 1024),2)." KB";     else return round(($byteSize / 1048576), 2)." MB"; }    $releases = GetGithubAPIResponse('https://api.github.com/repos/TobiHatti/'.$project["GithubID"].'/releases');                        
?> <h1><?= $project["ProjectName"]?> </h1> <hr /> <div class="projectSubpageContainer"> <div class="projectSubpage stagFade" style="display: <?= TabPageSelected(0, true) ?>"> <h1>Overview</h1> <article> <p> <?= $project["ProjectDescription"] ?> </p> </article> </div> <div class="projectSubpage stagFade" style="display: <?= TabPageSelected(1) ?>"> <h1>Support &amp; FAQ</h1> <div class="faqSearch"> <span>How can we help you?</span> <input type="search" placeholder="Search for a topic or keyword..."/> <button type="submit">Search</button> <br /> <b>Can't find what you're looking for?<br /><a href="#">Ask a question!</a></b> </div> <article> <h2><?= $project["ProjectName"]?>:</h2> <?php if($sql->ExecuteScalar("SELECT COUNT(*) FROM faq WHERE ProjectID = ?", $project["ProjectID"]) > 0): ?> <ul class="faqContainer"> <?php foreach($sql->ExecuteQuery("SELECT * FROM faq WHERE ProjectID = ?", $project["ProjectID"]) as $faq): ?> <li> <div class="votes"> <span class="voteCounter">0</span> </div> <a href="#/" title="Click to see the full entry"> <div class="faq"> <b><?= $faq["Question"] ?></b> <p><?= $faq["Answer"] ?></p> </div> </a> </li> <?php endforeach; ?> </ul> <?php else: ?> <h3>Sorry, there are no questions yet.</h3> <?php endif; ?> <br /> <h2>General Questions:</h2> <?php if($sql->ExecuteScalar("SELECT COUNT(*) FROM faq WHERE ProjectID = ''") > 0): ?> <ul class="faqContainer"> <?php foreach($sql->ExecuteQuery("SELECT * FROM faq WHERE ProjectID = ''") as $faq): ?> <li> <div class="votes"> <span class="voteCounter">0</span> </div> <a href="#/" title="Click to see the full entry"> <div class="faq"> <b><?= $faq["Question"] ?></b> <p><?= $faq["Answer"] ?></p> </div> </a> </li> <?php endforeach; ?> </ul> <?php else: ?> <h3>Sorry, there are no questions yet.</h3> <?php endif; ?> </article> </div> <div class="projectSubpage stagFade" style="display: <?= TabPageSelected(2) ?>"> <h1>Issues</h1> <article> </article> </div> <div class="projectSubpage" style="display: <?= TabPageSelected(3) ?>"> <h1>Downloads</h1> <article> <?php if(is_countable($releases) AND count($releases) > 0): ?> <a href="<?= (count($releases[0]->assets) > 0) ? $releases[0]->assets[0]->browser_download_url : $releases[0]->zipball_url ?>" download class="sfIgnore <?= ($releases[0]->prerelease) ? "downloadLatestPrerelease" : "downloadLatestRelease" ?> "> <i class="fas fa-download"></i> <div> Download<br /> <?= ($releases[0]->prerelease) ? "Pre-Release" : "Release" ?> <span>Version <?= $releases[0]->tag_name ?></span> <pre>File: <?= (count($releases[0]->assets) > 0) ? $releases[0]->assets[0]->name : "Source code (zip)" ?></pre> </div> </a> <h2>Other releases:</h2> <div class="otherReleases"> <?php foreach($releases as $release): ?> <h4>Version <?= $release->tag_name ?><strong>(Released on <?= date_format(date_create($release->published_at)," j. M Y")?>)</strong></h4> <?php foreach($release->assets as $asset): ?> <a class="<?= ($release->prerelease) ? "prereleaseDownload" : "releaseDownload" ?>" href="<?= $asset->browser_download_url ?>"> <i class="fas fa-download"></i> <?= $asset->name ?> <em> i <span> <?= ($release->prerelease) ? "Pre-Release" : "Release" ?><br /> Size: <?= ReadableFileSize($asset->size) ?> <br /> Author: <?= $release->author->login ?> </span> </em> </a> <?php endforeach; ?> <br /><br /><hr /> <?php endforeach; ?> </div> <?php endif; ?> </article> </div> <div class="projectSubpage stagFade" style="display: <?= TabPageSelected(4) ?>"> <h1>Version History</h1> <?php  if(is_countable($releases)):     if(count($releases) > 0):         foreach($releases as $release):               $downloadCount = 0;             foreach($release->assets as $asset) $downloadCount += $asset->download_count; ?> <div class="versionBox"> <div class="tagInfo"> <?php if($release->prerelease): ?> <span class="prerelease">Pre-release</span> <?php else: ?> <span class="release">Release</span> <?php endif; ?> <span class="tag"><i class="fas fa-tag"></i> <?= $release->tag_name ?></span> </div> <div class="generalInfo"> <a href="<?= $release->html_url ?>" target="_blank"><b><?= $release->name ?></b></a> <span>Released by <a href="<?= $release->author->html_url ?>" target="_blank"><?= $release->author->login ?></a> on the <?= date_format(date_create($release->published_at)," j. M Y")?>. Downloaded <?= $downloadCount ?> times.</span> <x-md> <?php                      $parsedown = new Parsedown();                     $parsedown->setSafeMode(true);                     echo $parsedown->text($release->body);                     ?> </x-md> <a class="githubBtn" href="<?= $release->html_url ?>" target="_blank"><i class="fab fa-github"></i> View on GitHub</a> <hr /> <strong>Assets:</strong> <ul class="assets"> <?php foreach($release->assets as $asset): ?> <li><a href="<?= $asset->browser_download_url ?>" download><i class="fas fa-cubes"></i> <?= $asset->name ?></a><em><?= ReadableFileSize($asset->size) ?> </em></li> <?php endforeach; ?> <li><a href="<?= $release->zipball_url ?>" download><i class="far fa-file-archive"></i> Source code (zip)</a></li> <li><a href="<?= $release->tarball_url ?>" download><i class="far fa-file-archive"></i> Source code (tar.gz)</a></li> </ul> </div> </div> <?php         endforeach;      else: ?> <h2>This project has no official releases yet.</h2> <h3>Check back soon for updates.</h3> <?php      endif;  else: ?> <h2>Could not process your request at the current time.</h2> <h3>Please check back in a few minutes.</h3> <?php endif; ?> </div> <div class="projectSubpage stagFade" style="display: <?= TabPageSelected(5) ?>"> <h1>Readme (GitHub)</h1> <article> <?php       function CheckRMDataImage($rawFileContent)     {         $lines =  explode("\n", $rawFileContent);         foreach($lines as $line)         {             if(strpos($line, "data-rmimg"))              {                 preg_match('/https?\:\/\/[\S\s]*?(?=\")/', $line, $httpLink);                 if(count($httpLink) > 0)                 {                     $rawFileContent = str_replace($line, '<img align="right" width="80" height="80" src="'.$httpLink[0].'">', $rawFileContent);                 }                 else $rawFileContent = str_replace($line, '', $rawFileContent);             }         }         return $rawFileContent;     }      $readme = @file_get_contents("https://raw.githubusercontent.com/TobiHatti/".$project["GithubID"]."/master/README.md");          if($readme !== false):         $parsedown = new Parsedown();         $parsedown->setSafeMode(true);     ?> <x-md><?= CheckRMDataImage($parsedown->text($readme)) ?></x-md> <?php else: ?> <h2>The Readme could not be found, or no Readme exists.</h2> <h3>Error 404</h3> <?php endif; ?> </article> </div> <div class="projectSubpage stagFade" style="display: <?= TabPageSelected(6) ?>"> <h1>Technical Information</h1> <article> </article> </div> <div class="projectSubpage stagFade" style="display: <?= TabPageSelected(7) ?>"> <h1>License</h1> <article> <p> <?php      $licence = @file_get_contents("https://raw.githubusercontent.com/TobiHatti/".$project["GithubID"]."/master/LICENSE");                  if($licence !== false):         echo nl2br(htmlspecialchars($licence));     else:     ?> </p> <h2>The License could not be found, or no License exists.</h2> <h3>Error 404</h3> <?php endif; ?> </article> </div> </div> </main> <a href="#top"><div class="navigateToTop"><i class="fas fa-chevron-up"></i></div></a> <footer> </footer> </body> </html>